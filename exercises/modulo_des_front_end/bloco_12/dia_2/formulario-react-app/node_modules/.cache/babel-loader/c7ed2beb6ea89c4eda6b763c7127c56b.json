{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/victor/trybe-exercises/exercises/modulo_des_front_end/bloco_12/dia_2/formulario-react-app/src/components/SelectState.jsx\";\nimport React, { Component } from 'react';\n\nclass SelectState extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getFetchStates = async callback => {\n      const URL = 'https://servicodados.ibge.gov.br/api/v1/localidades/estados/';\n\n      try {\n        const data = await fetch(URL);\n        const items = await data.json();\n        this.setState({\n          isLoaded: true,\n          items: items.map(iten => {\n            return {\n              id: iten.id,\n              sigla: iten.sigla\n            };\n          })\n        });\n      } catch (e) {\n        this.setState({\n          error: e\n        });\n      }\n\n      callback();\n    };\n\n    this.sortState = () => {\n      const entries = Object.entries(this.state.items);\n      const sorted = entries.sort((a, b) => a[1] - b[1]);\n      const results = sorted.map(item => item[1]);\n      this.setState({\n        items: results\n      });\n      console.log(sorted);\n    };\n\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: []\n    };\n    this.getFetchStates(this.sortState);\n  }\n\n  render() {\n    const {\n      error,\n      isLoaded,\n      items\n    } = this.state;\n\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Error: \", error.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 14\n      }, this);\n    } else if (!isLoaded) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"select\", {\n        children: items.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item.sigla,\n          children: item.sigla\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nexport default SelectState;","map":{"version":3,"sources":["/home/victor/trybe-exercises/exercises/modulo_des_front_end/bloco_12/dia_2/formulario-react-app/src/components/SelectState.jsx"],"names":["React","Component","SelectState","constructor","props","getFetchStates","callback","URL","data","fetch","items","json","setState","isLoaded","map","iten","id","sigla","e","error","sortState","entries","Object","state","sorted","sort","a","b","results","item","console","log","render","message"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,MAAMC,WAAN,SAA0BD,SAA1B,CAAmC;AACjCE,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAUnBC,cAVmB,GAUF,MAAOC,QAAP,IAAoB;AACnC,YAAMC,GAAG,GAAI,8DAAb;;AACA,UAAI;AACF,cAAMC,IAAI,GAAG,MAAMC,KAAK,CAACF,GAAD,CAAxB;AACA,cAAMG,KAAK,GAAG,MAAMF,IAAI,CAACG,IAAL,EAApB;AACA,aAAKC,QAAL,CAAc;AACZC,UAAAA,QAAQ,EAAE,IADE;AAEZH,UAAAA,KAAK,EAAEA,KAAK,CAACI,GAAN,CAAUC,IAAI,IAAI;AACvB,mBAAO;AACLC,cAAAA,EAAE,EAAED,IAAI,CAACC,EADJ;AAELC,cAAAA,KAAK,EAAEF,IAAI,CAACE;AAFP,aAAP;AAID,WALM;AAFK,SAAd;AASD,OAZD,CAYE,OAAMC,CAAN,EAAS;AACT,aAAKN,QAAL,CAAc;AAAEO,UAAAA,KAAK,EAAED;AAAT,SAAd;AACD;;AACDZ,MAAAA,QAAQ;AACT,KA5BkB;;AAAA,SA8BnBc,SA9BmB,GA8BP,MAAM;AAChB,YAAMC,OAAO,GAAGC,MAAM,CAACD,OAAP,CAAe,KAAKE,KAAL,CAAWb,KAA1B,CAAhB;AACA,YAAMc,MAAM,GAAGH,OAAO,CAACI,IAAR,CAAa,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CAA/B,CAAf;AACA,YAAMC,OAAO,GAAGJ,MAAM,CAACV,GAAP,CAAYe,IAAD,IAAUA,IAAI,CAAC,CAAD,CAAzB,CAAhB;AACA,WAAKjB,QAAL,CAAc;AAAEF,QAAAA,KAAK,EAAEkB;AAAT,OAAd;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYP,MAAZ;AACD,KApCkB;;AAEjB,SAAKD,KAAL,GAAa;AACXJ,MAAAA,KAAK,EAAE,IADI;AAEXN,MAAAA,QAAQ,EAAE,KAFC;AAGXH,MAAAA,KAAK,EAAE;AAHI,KAAb;AAKA,SAAKL,cAAL,CAAoB,KAAKe,SAAzB;AACD;;AA8BDY,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEb,MAAAA,KAAF;AAASN,MAAAA,QAAT;AAAmBH,MAAAA;AAAnB,QAA6B,KAAKa,KAAxC;;AACA,QAAGJ,KAAH,EAAU;AACR,0BAAO;AAAA,8BAAcA,KAAK,CAACc,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACD,KAFD,MAEO,IAAG,CAACpB,QAAJ,EAAc;AACnB,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACD,KAFM,MAEA;AACL,0BACE;AAAA,kBACGH,KAAK,CAACI,GAAN,CAAUe,IAAI,iBACb;AAAsB,UAAA,KAAK,EAAGA,IAAI,CAACZ,KAAnC;AAAA,oBAA6CY,IAAI,CAACZ;AAAlD,WAAaY,IAAI,CAACb,EAAlB;AAAA;AAAA;AAAA;AAAA,gBADD;AADH;AAAA;AAAA;AAAA;AAAA,cADF;AAOD;AACF;;AAtDgC;;AAyDnC,eAAed,WAAf","sourcesContent":["import React, { Component } from 'react';\n\nclass SelectState extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n    }\n    this.getFetchStates(this.sortState);\n  }\n\n  getFetchStates = async (callback) => {\n    const URL =  'https://servicodados.ibge.gov.br/api/v1/localidades/estados/';\n    try {\n      const data = await fetch(URL);\n      const items = await data.json();\n      this.setState({ \n        isLoaded: true, \n        items: items.map(iten => {\n          return {\n            id: iten.id,\n            sigla: iten.sigla\n          } \n        }),\n      });\n    } catch(e) {\n      this.setState({ error: e});\n    }\n    callback();\n  }\n  \n  sortState = () => {\n    const entries = Object.entries(this.state.items);\n    const sorted = entries.sort((a, b) => a[1] - b[1]);\n    const results = sorted.map((item) => item[1]);\n    this.setState({ items: results });\n    console.log(sorted);\n  }\n\n  render() {\n    const { error, isLoaded, items } = this.state;\n    if(error) {\n      return <div>Error: { error.message }</div>\n    } else if(!isLoaded) {\n      return <div>Loading...</div>\n    } else {\n      return (\n        <select>\n          {items.map(item => (\n            <option key={item.id} value={ item.sigla }>{ item.sigla }</option>\n          ))}\n        </select>\n      )\n    }\n  }\n}\n\nexport default SelectState;"]},"metadata":{},"sourceType":"module"}